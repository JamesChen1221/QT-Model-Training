# QT ç•¶æ²–æ½›åŠ›é æ¸¬ç³»çµ±

ä½¿ç”¨ XGBoost æ©Ÿå™¨å­¸ç¿’æ¨¡åž‹é æ¸¬è‚¡ç¥¨çš„ç•¶æ²–æ½›åŠ›ï¼Œæ”¯æ´å¤šç›®æ¨™é æ¸¬ã€‚

---

## ðŸš€ å¿«é€Ÿé–‹å§‹

### 0. æº–å‚™è³‡æ–™

**é‡è¦**ï¼šExcel è³‡æ–™æª”æ¡ˆæœªåŒ…å«åœ¨æ­¤å€‰åº«ä¸­ï¼Œä½ éœ€è¦è‡ªè¡Œæº–å‚™ã€‚

1. æº–å‚™è¨“ç·´è³‡æ–™ï¼š`data/QT Training Data.xlsx`
2. æº–å‚™é æ¸¬è³‡æ–™ï¼š`data/Stock TBP.xlsx`

è©³ç´°è³‡æ–™æ ¼å¼è«‹åƒè€ƒ `data/README.md`

### 1. å®‰è£ä¾è³´
```bash
pip install -r requirements.txt
```

### 2. è¨“ç·´æ¨¡åž‹
```bash
# æ–¹æ³• 1: ä½¿ç”¨æ‰¹æ¬¡æª”ï¼ˆæŽ¨è–¦ï¼‰
é›™æ“Š å¿«é€Ÿè¨“ç·´.bat

# æ–¹æ³• 2: ä½¿ç”¨å‘½ä»¤åˆ—
python train_qt_xgboost.py
```

### 3. é æ¸¬æ–°è‚¡ç¥¨
```bash
# æ–¹æ³• 1: ä½¿ç”¨æ‰¹æ¬¡æª”ï¼ˆæŽ¨è–¦ï¼‰
é›™æ“Š å¿«é€Ÿé æ¸¬.bat

# æ–¹æ³• 2: ä½¿ç”¨å‘½ä»¤åˆ—
python predict_new_stocks.py --input "data/Stock TBP.xlsx"
```

---

## ðŸ“ å°ˆæ¡ˆçµæ§‹

```
QT Model Training/
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ QT Training Data.xlsx       # è¨“ç·´è³‡æ–™ï¼ˆå«120å¤©æ”¶ç›¤åƒ¹åºåˆ—ï¼‰
â”‚   â”œâ”€â”€ Stock TBP.xlsx              # å¾…é æ¸¬è‚¡ç¥¨è³‡æ–™
â”‚   â””â”€â”€ new_predictions.csv         # é æ¸¬çµæžœï¼ˆè‡ªå‹•ç”Ÿæˆï¼‰
â”‚
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ qt_model_é–‹ç›¤_pct.pkl                    # é–‹ç›¤æ¼²å¹…é æ¸¬æ¨¡åž‹
â”‚   â”œâ”€â”€ qt_model_10åˆ†é˜ä½Žåƒ¹_pct.pkl              # 10åˆ†é˜ä½Žåƒ¹é æ¸¬æ¨¡åž‹
â”‚   â”œâ”€â”€ qt_model_1.5å°æ™‚é«˜åƒ¹_pct.pkl             # 1.5å°æ™‚é«˜åƒ¹é æ¸¬æ¨¡åž‹
â”‚   â”œâ”€â”€ qt_model_æœ€é«˜åƒ¹å‰çš„æœ€ä½Žåƒ¹_pct.pkl         # æœ€ä½Žåƒ¹é æ¸¬æ¨¡åž‹
â”‚   â””â”€â”€ training_results_*.png                  # è¨“ç·´çµæžœåœ–è¡¨
â”‚
â”œâ”€â”€ train_qt_xgboost.py             # è¨“ç·´è…³æœ¬ï¼ˆè¨“ç·´4å€‹æ¨¡åž‹ï¼‰
â”œâ”€â”€ predict_new_stocks.py           # é æ¸¬è…³æœ¬ï¼ˆä½¿ç”¨4å€‹æ¨¡åž‹ï¼‰
â”œâ”€â”€ config.py                       # é…ç½®åƒæ•¸
â”‚
â”œâ”€â”€ å¿«é€Ÿè¨“ç·´.bat                     # ä¸€éµè¨“ç·´å·¥å…·
â”œâ”€â”€ å¿«é€Ÿé æ¸¬.bat                     # ä¸€éµé æ¸¬å·¥å…·
â”‚
â”œâ”€â”€ requirements.txt                # Python ä¾è³´
â”œâ”€â”€ .gitignore                      # Git é…ç½®
â”‚
â””â”€â”€ ðŸ“š èªªæ˜Žæ–‡ä»¶/
    â”œâ”€â”€ README.md                   # æœ¬æ–‡ä»¶
    â”œâ”€â”€ è¨“ç·´æ¦‚å¿µèªªæ˜Ž.md              # æ©Ÿå™¨å­¸ç¿’æ¦‚å¿µ
    â”œâ”€â”€ æ–œçŽ‡è¨ˆç®—æ–¹å¼èªªæ˜Ž.md          # è¶¨å‹¢æ–œçŽ‡ç‰¹å¾µèªªæ˜Ž
    â”œâ”€â”€ æ¬„ä½æ¨™è¨˜èªªæ˜Ž.md              # æ¬„ä½å‘½åè¦å‰‡
    â”œâ”€â”€ è§¸ç™¼é¡žåž‹è™•ç†èªªæ˜Ž.md          # è§¸ç™¼é¡žåž‹é‚è¼¯
    â””â”€â”€ è¶¨å‹¢æ–œçŽ‡ç‰¹å¾µæå–ç¸½çµ.md      # ç‰¹å¾µæå–ç¸½çµ
```

---

## ðŸ“Š è³‡æ–™æ ¼å¼

### æ¬„ä½å‘½åè¦å‰‡

åœ¨ Excel ä¸­ä½¿ç”¨ç‰¹æ®Šæ¨™è¨˜ä¾†æ¨™ç¤ºæ¬„ä½ç”¨é€”ï¼š

- **`*` é–‹é ­** = å¿½ç•¥çš„æ¬„ä½ï¼ˆå¦‚ `*æ˜¨æ—¥æ”¶ç›¤åƒ¹`ã€`*å‚™è¨»`ï¼‰
- **`#` é–‹é ­** = ç›®æ¨™æ¨™ç±¤ï¼ˆå¦‚ `#é–‹ç›¤ (%)`ï¼‰
- **ç„¡æ¨™è¨˜** = ç‰¹å¾µæ¬„ä½ï¼ˆå¦‚ `5æ—¥é«˜åƒ¹è·é›¢ (%)`ï¼‰

### è¨“ç·´è³‡æ–™ï¼ˆQT Training Data.xlsxï¼‰

**åŸºæœ¬ç‰¹å¾µï¼ˆ12å€‹ï¼‰ï¼š**
- é–‹ç›¤æ—¥æœŸã€å…¬å¸ä»£ç¢¼ã€ç”¢æ¥­
- 5æ—¥/1å€‹æœˆ/6å€‹æœˆ é«˜åƒ¹è·é›¢ (%)
- 5æ—¥/1å€‹æœˆ/6å€‹æœˆ ä½Žåƒ¹è·é›¢ (%)
- ç›¤å‰ (%)
- è§¸ç™¼é¡žåž‹ã€æ¶ˆæ¯æƒ…ç·’åˆ†æ•¸
- EPS Surprise (%)ã€Revenue Surprise (%)ã€å±•æœ› (Guidance)

**è¶¨å‹¢ç‰¹å¾µï¼ˆ1å€‹åºåˆ— â†’ 15å€‹æ–œçŽ‡ç‰¹å¾µï¼‰ï¼š**
- `120å¤©æ”¶ç›¤åƒ¹åºåˆ—` - æ ¼å¼ï¼š`[100.5, 102.3, 101.8, ...]`
  - è‡ªå‹•æå– 15 å€‹è¶¨å‹¢æ–œçŽ‡ç‰¹å¾µï¼ˆ5å¤©/20å¤©/120å¤©ï¼Œå„5æ®µï¼‰

**ç›®æ¨™æ¨™ç±¤ï¼ˆ4å€‹ï¼Œå¸¶ `#`ï¼‰ï¼š**
- `#é–‹ç›¤ (%)` - é–‹ç›¤æ¼²å¹…
- `#10åˆ†é˜ä½Žåƒ¹ (%)` - é–‹ç›¤å¾Œ10åˆ†é˜å…§æœ€ä½Žåƒ¹
- `#1.5å°æ™‚é«˜åƒ¹ (%)` - é–‹ç›¤å¾Œ1.5å°æ™‚å…§æœ€é«˜åƒ¹
- `#æœ€é«˜åƒ¹å‰çš„æœ€ä½Žåƒ¹ (%)` - é”åˆ°æœ€é«˜åƒ¹å‰çš„æœ€ä½Žåƒ¹

### é æ¸¬è³‡æ–™ï¼ˆStock TBP.xlsxï¼‰

åªéœ€è¦**ç‰¹å¾µæ¬„ä½**ï¼Œä¸éœ€è¦ç›®æ¨™æ¬„ä½ï¼ˆ`#` é–‹é ­çš„ï¼‰ã€‚

**é‡è¦**ï¼šå¿…é ˆåŒ…å« `120å¤©æ”¶ç›¤åƒ¹åºåˆ—` æ¬„ä½æ‰èƒ½ç²å¾—æº–ç¢ºé æ¸¬ã€‚

---

## ðŸŽ¯ ä½¿ç”¨æ–¹å¼

### è¨“ç·´æ¨¡åž‹

**ä½¿ç”¨æ‰¹æ¬¡æª”ï¼ˆæŽ¨è–¦ï¼‰ï¼š**
```
é›™æ“Š å¿«é€Ÿè¨“ç·´.bat
```

**ä½¿ç”¨å‘½ä»¤åˆ—ï¼š**
```bash
python train_qt_xgboost.py
```

**è¼¸å‡ºï¼š**
- 4 å€‹æ¨¡åž‹æª”æ¡ˆï¼š`models/qt_model_*.pkl`
- 4 å¼µè¨“ç·´åœ–è¡¨ï¼š`models/training_results_*.png`
- æŽ§åˆ¶å°é¡¯ç¤ºè¨“ç·´éŽç¨‹å’Œè©•ä¼°çµæžœ

### é æ¸¬æ–°è‚¡ç¥¨

**ä½¿ç”¨æ‰¹æ¬¡æª”ï¼ˆæŽ¨è–¦ï¼‰ï¼š**
```
1. åœ¨ Excel æ›´æ–° data/Stock TBP.xlsx
2. é›™æ“Š å¿«é€Ÿé æ¸¬.bat
3. è‡ªå‹•é–‹å•Ÿçµæžœæª”æ¡ˆ
```

**ä½¿ç”¨å‘½ä»¤åˆ—ï¼š**
```bash
python predict_new_stocks.py --input "data/Stock TBP.xlsx"
```

**è¼¸å‡ºï¼š**
- æŽ§åˆ¶å°é¡¯ç¤º 4 å€‹ç›®æ¨™çš„é æ¸¬çµæžœ
- `data/new_predictions.csv` - è©³ç´°çµæžœæª”æ¡ˆ

### æ‰¹é‡é æ¸¬

åœ¨ Excel ä¸­æ–°å¢žå¤šè¡Œè³‡æ–™ï¼ŒåŸ·è¡Œç›¸åŒå‘½ä»¤å³å¯ä¸€æ¬¡é æ¸¬å¤šæ”¯è‚¡ç¥¨ã€‚

---

## ðŸ“ˆ è§£è®€çµæžœ

### é æ¸¬å€¼æ„ç¾©

ç³»çµ±æœƒé æ¸¬ 4 å€‹ç›®æ¨™å€¼ï¼š

```
é æ¸¬_#é–‹ç›¤ (%) = 2.46
é æ¸¬_#10åˆ†é˜ä½Žåƒ¹ (%) = -1.87
é æ¸¬_#1.5å°æ™‚é«˜åƒ¹ (%) = 0.31
é æ¸¬_#æœ€é«˜åƒ¹å‰çš„æœ€ä½Žåƒ¹ (%) = -1.94
```

**è§£è®€ï¼š**
- é–‹ç›¤é æœŸä¸Šæ¼² 2.46%
- é–‹ç›¤å¾Œ10åˆ†é˜å¯èƒ½å›žè½è‡³ -1.87%
- 1.5å°æ™‚å…§æœ€é«˜å¯èƒ½åˆ° 0.31%
- é”åˆ°æœ€é«˜åƒ¹å‰å¯èƒ½å›žè½è‡³ -1.94%

### ç•¶æ²–ç­–ç•¥å»ºè­°

| é æ¸¬å€¼çµ„åˆ | ç­–ç•¥å»ºè­° |
|-----------|---------|
| é–‹ç›¤ > +5%, é«˜åƒ¹ > +10% | é‡é»žé—œæ³¨ï¼Œé–‹ç›¤åšå¤š |
| é–‹ç›¤ > +3%, ä½Žåƒ¹ < -2% | ç­‰å¾…å›žè½å¾Œé€²å ´ |
| é–‹ç›¤ < 0%, é«˜åƒ¹ < +2% | é¿å…åšå¤š |
| æ‰€æœ‰å€¼ < 0% | è€ƒæ…®åšç©ºæˆ–è§€æœ› |

---

## ðŸŽ“ æŠ€è¡“èªªæ˜Ž

### æ¨¡åž‹æž¶æ§‹

- **æ¼”ç®—æ³•**ï¼šXGBoostï¼ˆæ¢¯åº¦æå‡æ¨¹ï¼‰
- **æ¨¡åž‹æ•¸é‡**ï¼š4 å€‹ç¨ç«‹æ¨¡åž‹ï¼ˆæ¯å€‹ç›®æ¨™ä¸€å€‹ï¼‰
- **ç‰¹å¾µæ•¸é‡**ï¼š40 å€‹
  - 12 å€‹åŸºæœ¬ç‰¹å¾µ
  - 15 å€‹è¶¨å‹¢æ–œçŽ‡ç‰¹å¾µ
  - 13 å€‹ç”¢æ¥­ One-Hot ç‰¹å¾µ

### è¶¨å‹¢æ–œçŽ‡ç‰¹å¾µ

å¾ž `120å¤©æ”¶ç›¤åƒ¹åºåˆ—` æå– 15 å€‹æ–œçŽ‡ç‰¹å¾µï¼š

- **120å¤©è¶¨å‹¢**ï¼šåˆ‡5æ®µï¼Œæ¯æ®µç´„24å¤©
- **20å¤©è¶¨å‹¢**ï¼šåˆ‡5æ®µï¼Œæ¯æ®µç´„4å¤©
- **5å¤©è¶¨å‹¢**ï¼šåˆ‡5æ®µï¼Œæ¯æ®µç´„1å¤©

ä½¿ç”¨æ¨™æº–åŒ–åƒ¹æ ¼è¨ˆç®—ç·šæ€§å›žæ­¸æ–œçŽ‡ï¼Œå–®ä½ç‚º %/å¤©ã€‚

è©³ç´°èªªæ˜Žè«‹åƒè€ƒ `æ–œçŽ‡è¨ˆç®—æ–¹å¼èªªæ˜Ž.md`

### è§¸ç™¼é¡žåž‹è™•ç†

- **é¡žåž‹ 1ï¼ˆè²¡å ±ç‚ºä¸»ï¼‰**ï¼šè²¡å ±æ¬„ä½ç”¨ä¸­ä½æ•¸å¡«è£œç¼ºå¤±å€¼
- **é¡žåž‹ 2ï¼ˆæ¶ˆæ¯ç‚ºä¸»ï¼‰**ï¼šè²¡å ±æ¬„ä½å¡« 0ï¼ˆå› ç‚ºç„¡è²¡å ±æ•¸æ“šï¼‰
- **é¡žåž‹ 3ï¼ˆè²¡å ±+æ¶ˆæ¯ï¼‰**ï¼šè²¡å ±æ¬„ä½ç”¨ä¸­ä½æ•¸å¡«è£œç¼ºå¤±å€¼

è©³ç´°èªªæ˜Žè«‹åƒè€ƒ `è§¸ç™¼é¡žåž‹è™•ç†èªªæ˜Ž.md`

### è¨“ç·´åƒæ•¸

```python
n_estimators = 100      # æ¨¹çš„æ•¸é‡
max_depth = 5           # æ¨¹çš„æœ€å¤§æ·±åº¦
learning_rate = 0.1     # å­¸ç¿’çŽ‡
test_size = 0.2         # æ¸¬è©¦é›†æ¯”ä¾‹ï¼ˆ20%ï¼‰
```

---

## âš ï¸ é‡è¦æé†’

### æ¨¡åž‹é™åˆ¶

```
âœ“ ç›®å‰è¨“ç·´è³‡æ–™ï¼š17 ç­†
âœ“ é æ¸¬æº–ç¢ºåº¦æœ‰é™ï¼ˆRÂ² Score å¯èƒ½ç‚ºè² ï¼‰
âœ“ åƒ…ä¾›åƒè€ƒï¼Œä¸æ˜¯æŠ•è³‡å»ºè­°
âœ“ éœ€è¦çµåˆå…¶ä»–åˆ†æžæ–¹æ³•
```

### å¦‚ä½•æå‡æº–ç¢ºåº¦

1. **æ”¶é›†æ›´å¤šè³‡æ–™**ï¼ˆå»ºè­°ï¼š100+ ç­†ï¼‰
2. **ç¢ºä¿è³‡æ–™å“è³ª**ï¼ˆå®Œæ•´çš„120å¤©æ”¶ç›¤åƒ¹åºåˆ—ï¼‰
3. **é‡æ–°è¨“ç·´æ¨¡åž‹**ï¼š`python train_qt_xgboost.py`
4. **æŒçºŒé©—è­‰**ï¼šè¨˜éŒ„é æ¸¬çµæžœï¼Œèˆ‡å¯¦éš›æ¯”è¼ƒ

---

## ðŸ› ï¸ å¸¸è¦‹å•é¡Œ

### Q: æ‰¾ä¸åˆ°æ¨¡åž‹æª”æ¡ˆï¼Ÿ
**A:** å…ˆåŸ·è¡Œ `å¿«é€Ÿè¨“ç·´.bat` æˆ– `python train_qt_xgboost.py` è¨“ç·´æ¨¡åž‹

### Q: ç¼ºå°‘ 120å¤©æ”¶ç›¤åƒ¹åºåˆ—ï¼Ÿ
**A:** åœ¨ Excel ä¸­åŠ å…¥æ­¤æ¬„ä½ï¼Œæ ¼å¼ç‚º `[100.5, 102.3, ...]`ï¼Œå¦å‰‡è¶¨å‹¢ç‰¹å¾µå°‡å…¨éƒ¨ç‚º 0

### Q: åºåˆ—æ ¼å¼éŒ¯èª¤ï¼Ÿ
**A:** ç¢ºä¿æ ¼å¼ç‚º `[å€¼1, å€¼2, å€¼3, ...]`ï¼Œç”¨é€—è™Ÿåˆ†éš”ï¼Œå…±120å€‹å€¼

### Q: é æ¸¬çµæžœä¸æº–ï¼Ÿ
**A:** æ­£å¸¸ï¼Œå› ç‚ºè¨“ç·´è³‡æ–™å¤ªå°‘ï¼ˆ17ç­†ï¼‰ã€‚å»ºè­°æ”¶é›† 100+ ç­†è³‡æ–™å¾Œé‡æ–°è¨“ç·´

### Q: å¦‚ä½•é æ¸¬å¤šæ”¯è‚¡ç¥¨ï¼Ÿ
**A:** åœ¨ Excel ä¸­æ–°å¢žå¤šè¡Œï¼ŒåŸ·è¡Œç›¸åŒå‘½ä»¤å³å¯

### Q: è§¸ç™¼é¡žåž‹æ˜¯ä»€éº¼ï¼Ÿ
**A:** 
- 1 = è²¡å ±ç‚ºä¸»
- 2 = æ¶ˆæ¯ç‚ºä¸»ï¼ˆç„¡è²¡å ±æ•¸æ“šï¼‰
- 3 = è²¡å ±+æ¶ˆæ¯

---

## ðŸ“ å¿«é€Ÿåƒè€ƒ

### æœ€å¸¸ç”¨å‘½ä»¤

```bash
# è¨“ç·´ï¼ˆæ‰¹æ¬¡æª”ï¼‰
é›™æ“Š å¿«é€Ÿè¨“ç·´.bat

# è¨“ç·´ï¼ˆå‘½ä»¤åˆ—ï¼‰
python train_qt_xgboost.py

# é æ¸¬ï¼ˆæ‰¹æ¬¡æª”ï¼‰
é›™æ“Š å¿«é€Ÿé æ¸¬.bat

# é æ¸¬ï¼ˆå‘½ä»¤åˆ—ï¼‰
python predict_new_stocks.py --input "data/Stock TBP.xlsx"

# æŸ¥çœ‹çµæžœ
start data\new_predictions.csv
```

### æª”æ¡ˆä½ç½®

```
è¨“ç·´è³‡æ–™: data/QT Training Data.xlsx
é æ¸¬è³‡æ–™: data/Stock TBP.xlsx
é æ¸¬çµæžœ: data/new_predictions.csv
æ¨¡åž‹æª”æ¡ˆ: models/qt_model_*.pkl
è¨“ç·´åœ–è¡¨: models/training_results_*.png
```

---

## ðŸ“š ç›¸é—œæ–‡ä»¶

- **è¨“ç·´æ¦‚å¿µèªªæ˜Ž.md** - æ©Ÿå™¨å­¸ç¿’åŸºç¤Žæ¦‚å¿µ
- **æ–œçŽ‡è¨ˆç®—æ–¹å¼èªªæ˜Ž.md** - è¶¨å‹¢æ–œçŽ‡ç‰¹å¾µè©³è§£
- **æ¬„ä½æ¨™è¨˜èªªæ˜Ž.md** - Excel æ¬„ä½å‘½åè¦å‰‡
- **è§¸ç™¼é¡žåž‹è™•ç†èªªæ˜Ž.md** - è§¸ç™¼é¡žåž‹é‚è¼¯èªªæ˜Ž
- **è¶¨å‹¢æ–œçŽ‡ç‰¹å¾µæå–ç¸½çµ.md** - ç‰¹å¾µæå–æ–¹æ³•ç¸½çµ

---

## ðŸ”§ æŠ€è¡“æ£§

- **Python 3.8+**
- **XGBoost** - æ¢¯åº¦æå‡æ¨¹æ¨¡åž‹
- **pandas** - è³‡æ–™è™•ç†
- **numpy** - æ•¸å€¼è¨ˆç®—
- **scikit-learn** - æ©Ÿå™¨å­¸ç¿’å·¥å…·
- **matplotlib** - è¦–è¦ºåŒ–
- **openpyxl** - Excel è®€å¯«

---

## ðŸ“„ æŽˆæ¬Š

MIT License

---

**ç¥ä½ äº¤æ˜“é †åˆ©ï¼** ðŸš€
